<% provide(:title, "All users") %>

<div class="container">
	<div class="row">
		<h1>All users</h1>

		<%= will_paginate %>

		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th>Name</th>
					<th>Email</th>
					<th>Registered Date</th>
					<% if current_user.admin? %>
					<th>Action</th>
					<% end %>
				</tr>
			</thead>
			<tbody>
				<% @users.each do |user| %>
			    <tr>
			    	<td>
			    		<%= link_to (user.first_name + " " + user.last_name), user %>
			    	</td>
			    	<td>
			    		<%= mail_to user.email, user.email %>
			    	</td>
			    	<td>
			    		<%= user.format_created_date %>
			    	</td>
					<!-- admin check and cannot delete yourself -->
					<% if current_user.admin? && !current_user?(user) %>
					<td>
			      		<%= link_to "delete", user, method: :delete, data: {confirm: "You sure?" }, class: "btn btn-danger" %>
			      	</td>
			      	<% end %>
			    </tr>
			  	<% end %>
			</tbody>
		</table>

		<%= will_paginate %>
	</div>
</div>